<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="css/style.css" media="screen" type="text/css" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=vVx4BApDDaqHqv49noQqLiD1"></script>
	
    <!--<script type="text/javascript" src="js/changeMore.js">-->
    <title></title>
</head>

<body>
       
<div id="map"></div>

<script>

	var map = new BMap.Map("map",{minZoom:18,maxZoom:19});          // 创建地图实例
    var pt_center = new BMap.Point(116.365247,39.969982);
    map.centerAndZoom(pt_center,19 );             // 初始化地图，设置中心点坐标和地图级别
    map.disableScrollWheelZoom(); // 允许滚轮缩放
	
	var top_left_control = new BMap.ScaleControl({anchor: BMAP_ANCHOR_TOP_LEFT});// 左上角，添加比例尺
	var top_left_navigation = new BMap.NavigationControl();  //左上角，添加默认缩放平移控件
	map.addControl(top_left_control);  //添加控件和比例尺     
	map.addControl(top_left_navigation); 


<!--用添加文本标签的方法添加方块-->

 function  Bpoint(Longitude,Latitude) //声明对象
     {    
        this.Latitude= Latitude; 
		this.Longitude = Longitude;
     }
	var lonlat=new Array();
	lonlat.push(new Bpoint(116.363419, 39.970383),new Bpoint(116.362642, 39.968984),new Bpoint(116.36699, 39.969637),new Bpoint(116.365332, 39.970335),new Bpoint(116.363302, 39.969775),new Bpoint(116.365463, 39.969246))
	map.clearOverlays();  
	 var movei=0;
     var moveTime=null;
	 
	 function moveShow(){	
			//var b=new Array();
			var b=new Array(new Array(0,1,2,0,0,0),new Array(0,0,2,0,0,0),new Array(0,0,0,3,4,0),new Array(0,0,0,0,4,0),new Array(0,1,0,0,0,0),new Array(0,0,0,1,0,0));
/*					b[0]=new Array(0,1,2,0,0,0);
					b[1]=new Array(0,0,2,0,0,0);
					b[2]=new Array(0,0,0,3,4,0);
					b[3]=new Array(0,0,0,0,4,0);
					b[4]=new Array(0,1,0,0,0,0);
					b[5]=new Array(0,0,0,1,0,0);	  */
		for(var i=0;i<6;i++){
		  length="24px"
				//alert(height+width)
				var myLabel = new BMap.Label("<p>"+i+"人</p>",     //为lable填写内容
               		{position: new BMap.Point(lonlat[i].Longitude,lonlat[i].Latitude)});           //label的位置
					myLabel.setStyle({       //给label设置样式，任意的CSS都是可以的
  		    		height:length ,                //高度
    				width:length,                 //宽
					borderRadius:"12px",
					opacity:"0.8",			//透明度
					 border:"0", 
					 color:"black",
					 fontSize:"24px",               //字号
					 //fontWeight:"bold",
        textAlign:"center",            //文字水平居中显示
    lineHeight:"18px",            //行高，文字垂直居中显示
	
					});
					myLabel.setStyle({background:"#0099CC", });
				//根据信号强度不同设置不同颜
 				map.addOverlay(myLabel);
				lon=0.00015/32*12;
				lat=0.00011/32*12;	
				for(var k=0;k<6;k++){
				if(b[i][k]!=0){
				var polyline = new BMap.Polyline([
       new BMap.Point(lonlat[i].Longitude+lon, lonlat[i].Latitude-lat),new BMap.Point(lonlat[k].Longitude+lon, lonlat[k].Latitude-lat)
    ], {strokeColor:"#FFCC00", strokeWeight:3, strokeOpacity:0.8});
    map.addOverlay(polyline);
				/*var points = [point0,point1]			
				var curve = new BMapLib.CurveLine(points, {strokeColor:"blue", strokeWeight:3, strokeOpacity:0.5}); //创建弧线对象
				map.addOverlay(curve); //添加到地图中*/
    
    }}
				}	
				
					
					moveTime= window.setInterval(function(){delay(b);}, 500);
	 
	 }
	  var a=new Array();
	 function delay(b){
		//alert("1")
		// pic="img/dot.png"
		pic="img/marker.png"
		//pic="img/location.png"		
		var myIcon = new BMap.Icon(pic, new BMap.Size(25, 25),{anchor: new BMap.Size(20,20),});
		var movei_max=8;
		if(movei<movei_max){
		var markerNum=0;
			for(var i=0;i<6;i++){
			for(var k=0;k<6;k++){
				if(b[i][k]!=0){
				
			lon=0.00015/32*12;
			lat=0.00011/32*12;	
			//var myIcon = new BMap.Icon(pic, new BMap.Size(21, 21),{ anchor: new BMap.Size(24, 24),});			  
			map.removeOverlay(a[markerNum]);		
			var d_lon=(lonlat[k].Longitude-lonlat[i].Longitude)/movei_max*(movei+1);
			var d_lat=(lonlat[k].Latitude-lonlat[i].Latitude)/movei_max*(movei+1);
			var marker= new BMap.Marker(new BMap.Point(lonlat[i].Longitude+lon+d_lon,lonlat[i].Latitude-lat+d_lat), {icon: myIcon})
			//var marker= new BMap.Marker(new BMap.Point(lonlat[i].Longitude+lon,lonlat[i].Latitude-lat));
			a[markerNum]=marker;
			markerNum++;
			map.addOverlay(marker);	
			}
			}
			}
			movei++;
		}else{
		  window.clearInterval(moveTime);
		}
	}	
     moveShow();
    
    //地图加载完毕事件
   /* map.addEventListener("tilesloaded",function(){
        //alert("地图加载完毕");
        if(!isFirstLoad){
            //map.clearOverlays();//清除所有的覆盖物
            //清除上一次绘制的箭头线，不清除上一次的箭头线，当地图放大时箭头线也会跟着放大
            for(var i=0; i<arrowLineList.length; i++){
                map.removeOverlay(arrowLineList[i]);//清除制定的覆盖物，可以是直线、标注等
            }
            arrowLineList.length = 0;
            //重新绘制箭头线
            for(var i=0; i<lineList.length; i++){
                arrowLineList[arrowLineList.length] = addArrow(lineList[i],15 / arrowLineLengthRate,Math.PI / 7);//记录绘制的箭头线
            }
        }
        isFirstLoad = false;
    });
    */
				
				map.addEventListener('click', function(e){
var info = new BMap.InfoWindow('', {width: 260});
var projection = this.getMapType().getProjection();
 
var lngLat = e.point;
var lngLatStr = "经纬度：" + lngLat.lng + ", " + lngLat.lat;
 
var worldCoordinate = projection.lngLatToPoint(lngLat);
var worldCoordStr = "平面坐标：" + worldCoordinate.x + ", " + worldCoordinate.y;
 
var pixelCoordinate = new BMap.Pixel(Math.floor(worldCoordinate.x * Math.pow(2, this.getZoom() - 18)),
Math.floor(worldCoordinate.y * Math.pow(2, this.getZoom() - 18)));
var pixelCoordStr = "像素坐标：" + pixelCoordinate.x + ", " + pixelCoordinate.y;

var tileCoordinate = new BMap.Pixel(Math.floor(pixelCoordinate.x / 256),
Math.floor(pixelCoordinate.y / 256));
var tileCoordStr = "图块坐标：" + tileCoordinate.x + ", " + tileCoordinate.y;
 
var viewportCoordinate = map.pointToPixel(lngLat);
var viewportCoordStr = "可视区域坐标：" + viewportCoordinate.x + ", " +
viewportCoordinate.y;
var overlayCoordinate = map.pointToOverlayPixel(lngLat);
var overlayCoordStr = "覆盖物坐标：" + overlayCoordinate.x + ", " +
overlayCoordinate.y;
 
info.setContent(lngLatStr +pixelCoordStr );//+ pixelCoordStr + tileCoordStr +viewportCoordStr + overlayCoordStr);
map.openInfoWindow(info, lngLat);
var marker = new BMap.Marker(new BMap.Point(lngLat.lng,lngLat.lat)); // 创建点
map.addOverlay(marker);
var opts = {
	  position : lngLat,    // 指定文本标注所在的地理位置
	  offset   : new BMap.Size(5, 5)    //设置文本偏移量
	}
var label = new BMap.Label(lngLatStr +'</br>'+ pixelCoordStr, opts);  // 创建文本标注对象
		label.setStyle({
			 color : "black",
			 fontSize : "12px",
			// height : "20px",
			 lineHeight : "20px",
			 fontFamily:"微软雅黑"
		 });
		 
	map.addOverlay(label);  
	 label.addEventListener("rightclick", function () {
        map.removeOverlay(marker);
		 map.removeOverlay(label);
		 
    });

    
});

//map.addEventListener("tilesloaded", getData);
//map.addEventListener("zoomend", getData);
//map.addEventListener("moveend", getData);
	
</script>
</body>
</html>